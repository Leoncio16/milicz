/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/s2-geometry@1.2.10/src/s2geometry.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(t){"use strict";var e=t.S2={L:{}};e.L.LatLng=function(t,e,r){var n=parseFloat(t,10),o=parseFloat(e,10);if(isNaN(n)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+e+")");return!0!==r&&(n=Math.max(Math.min(n,90),-90),o=(o+180)%360+(o<-180||180===o?180:-180)),{lat:n,lng:o}},e.L.LatLng.DEG_TO_RAD=Math.PI/180,e.L.LatLng.RAD_TO_DEG=180/Math.PI,e.LatLngToXYZ=function(t){var r=e.L.LatLng.DEG_TO_RAD,n=t.lat*r,o=t.lng*r,a=Math.cos(n);return[Math.cos(o)*a,Math.sin(o)*a,Math.sin(n)]},e.XYZToLatLng=function(t){var r=e.L.LatLng.RAD_TO_DEG,n=Math.atan2(t[2],Math.sqrt(t[0]*t[0]+t[1]*t[1])),o=Math.atan2(t[1],t[0]);return e.L.LatLng(n*r,o*r)};e.XYZToFaceUV=function(t){var e=function(t){var e=[Math.abs(t[0]),Math.abs(t[1]),Math.abs(t[2])];return e[0]>e[1]?e[0]>e[2]?0:2:e[1]>e[2]?1:2}(t);t[e]<0&&(e+=3);var r=function(t,e){var r,n;switch(t){case 0:r=e[1]/e[0],n=e[2]/e[0];break;case 1:r=-e[0]/e[1],n=e[2]/e[1];break;case 2:r=-e[0]/e[2],n=-e[1]/e[2];break;case 3:r=e[2]/e[0],n=e[1]/e[0];break;case 4:r=e[2]/e[1],n=-e[0]/e[1];break;case 5:r=-e[1]/e[2],n=-e[0]/e[2];break;default:throw{error:"Invalid face"}}return[r,n]}(e,t);return[e,r]},e.FaceUVToXYZ=function(t,e){var r=e[0],n=e[1];switch(t){case 0:return[1,r,n];case 1:return[-r,1,n];case 2:return[-r,-n,1];case 3:return[-1,-n,-r];case 4:return[n,-1,-r];case 5:return[n,r,-1];default:throw{error:"Invalid face"}}};var r=function(t){return t>=.5?1/3*(4*t*t-1):1/3*(1-4*(1-t)*(1-t))};e.STToUV=function(t){return[r(t[0]),r(t[1])]};var n=function(t){return t>=0?.5*Math.sqrt(1+3*t):1-.5*Math.sqrt(1-3*t)};e.UVToST=function(t){return[n(t[0]),n(t[1])]},e.STToIJ=function(t,e){var r=1<<e,n=function(t){var e=Math.floor(t*r);return Math.max(0,Math.min(r-1,e))};return[n(t[0]),n(t[1])]},e.IJToST=function(t,e,r){var n=1<<e;return[(t[0]+r[0])/n,(t[1]+r[1])/n]};var o=function(t,e,r,n){if(0==n){1==r&&(e.x=t-1-e.x,e.y=t-1-e.y);var o=e.x;e.x=e.y,e.y=o}},a=function(t,e,r,n){var o={a:[[0,"d"],[1,"a"],[3,"b"],[2,"a"]],b:[[2,"b"],[1,"b"],[3,"a"],[0,"c"]],c:[[2,"c"],[3,"d"],[1,"c"],[0,"b"]],d:[[0,"a"],[3,"c"],[1,"d"],[2,"d"]]};"number"!=typeof n&&console.warn(new Error("called pointToHilbertQuadList without face value, defaulting to '0'").stack);for(var a=n%2?"d":"a",i=[],l=r-1;l>=0;l--){var u=1<<l,c=o[a][2*(t&u?1:0)+(e&u?1:0)];i.push(c[0]),a=c[1]}return i};e.S2Cell=function(){},e.S2Cell.FromHilbertQuadKey=function(t){var r,n,a,i,l,u,c=t.split("/"),s=parseInt(c[0]),f=c[1],g=f.length,h={x:0,y:0};for(r=g-1;r>=0;r--)n=g-r,i=0,l=0,"1"===(a=f[r])?l=1:"2"===a?(i=1,l=1):"3"===a&&(i=1),u=Math.pow(2,n-1),o(u,h,i,l),h.x+=u*i,h.y+=u*l;if(s%2==1){var S=h.x;h.x=h.y,h.y=S}return e.S2Cell.FromFaceIJ(parseInt(s),[h.x,h.y],n)},e.S2Cell.FromLatLng=function(t,r){if(!t.lat&&0!==t.lat||!t.lng&&0!==t.lng)throw new Error("Pass { lat: lat, lng: lng } to S2.S2Cell.FromLatLng");var n=e.LatLngToXYZ(t),o=e.XYZToFaceUV(n),a=e.UVToST(o[1]),i=e.STToIJ(a,r);return e.S2Cell.FromFaceIJ(o[0],i,r)},e.S2Cell.FromFaceIJ=function(t,r,n){var o=new e.S2Cell;return o.face=t,o.ij=r,o.level=n,o},e.S2Cell.prototype.toString=function(){return"F"+this.face+"ij["+this.ij[0]+","+this.ij[1]+"]@"+this.level},e.S2Cell.prototype.getLatLng=function(){var t=e.IJToST(this.ij,this.level,[.5,.5]),r=e.STToUV(t),n=e.FaceUVToXYZ(this.face,r);return e.XYZToLatLng(n)},e.S2Cell.prototype.getCornerLatLngs=function(){for(var t=[],r=[[0,0],[0,1],[1,1],[1,0]],n=0;n<4;n++){var o=e.IJToST(this.ij,this.level,r[n]),a=e.STToUV(o),i=e.FaceUVToXYZ(this.face,a);t.push(e.XYZToLatLng(i))}return t},e.S2Cell.prototype.getFaceAndQuads=function(){var t=a(this.ij[0],this.ij[1],this.level,this.face);return[this.face,t]},e.S2Cell.prototype.toHilbertQuadkey=function(){var t=a(this.ij[0],this.ij[1],this.level,this.face);return this.face.toString(10)+"/"+t.join("")},e.latLngToNeighborKeys=e.S2Cell.latLngToNeighborKeys=function(t,r,n){return e.S2Cell.FromLatLng({lat:t,lng:r},n).getNeighbors().map((function(t){return t.toHilbertQuadkey()}))},e.S2Cell.prototype.getNeighbors=function(){var t=function(t,r,n){var o=1<<n;if(r[0]>=0&&r[1]>=0&&r[0]<o&&r[1]<o)return e.S2Cell.FromFaceIJ(t,r,n);var a=e.IJToST(r,n,[.5,.5]),i=e.STToUV(a),l=e.FaceUVToXYZ(t,i),u=e.XYZToFaceUV(l);return t=u[0],i=u[1],a=e.UVToST(i),r=e.STToIJ(a,n),e.S2Cell.FromFaceIJ(t,r,n)},r=this.face,n=this.ij[0],o=this.ij[1],a=this.level;return[t(r,[n-1,o],a),t(r,[n,o-1],a),t(r,[n+1,o],a),t(r,[n,o+1],a)]},e.FACE_BITS=3,e.MAX_LEVEL=30,e.POS_BITS=2*e.MAX_LEVEL+1,e.facePosLevelToId=e.S2Cell.facePosLevelToId=e.fromFacePosLevel=function(r,n,o){var a,i,l,u=t.dcodeIO&&t.dcodeIO.Long||require("long");for(o||(o=n.length),n.length>o&&(n=n.substr(0,o)),a=u.fromString(r.toString(10),!0,10).toString(2);a.length<e.FACE_BITS;)a="0"+a;for(i=u.fromString(n,!0,4).toString(2);i.length<2*o;)i="0"+i;for(l=a+i,l+="1";l.length<e.FACE_BITS+e.POS_BITS;)l+="0";return u.fromString(l,!0,2).toString(10)},e.keyToId=e.S2Cell.keyToId=e.toId=e.toCellId=e.fromKey=function(t){var r=t.split("/");return e.fromFacePosLevel(r[0],r[1],r[1].length)},e.idToKey=e.S2Cell.idToKey=e.S2Cell.toKey=e.toKey=e.fromId=e.fromCellId=e.S2Cell.toHilbertQuadkey=e.toHilbertQuadkey=function(r){for(var n=t.dcodeIO&&t.dcodeIO.Long||require("long"),o=n.fromString(r,!0,10).toString(2);o.length<e.FACE_BITS+e.POS_BITS;)o="0"+o;for(var a=o.lastIndexOf("1"),i=o.substring(0,3),l=o.substring(3,a),u=l.length/2,c=n.fromString(i,!0,2).toString(10),s=n.fromString(l,!0,2).toString(4);s.length<u;)s="0"+s;return c+"/"+s},e.keyToLatLng=e.S2Cell.keyToLatLng=function(t){return e.S2Cell.FromHilbertQuadKey(t).getLatLng()},e.idToLatLng=e.S2Cell.idToLatLng=function(t){var r=e.idToKey(t);return e.keyToLatLng(r)},e.S2Cell.latLngToKey=e.latLngToKey=e.latLngToQuadkey=function(t,r,n){if(isNaN(n)||n<1||n>30)throw new Error("'level' is not a number between 1 and 30 (but it should be)");return e.S2Cell.FromLatLng({lat:t,lng:r},n).toHilbertQuadkey()},e.stepKey=function(e,r){var n,o=t.dcodeIO&&t.dcodeIO.Long||require("long"),a=e.split("/"),i=a[0],l=a[1],u=a[1].length,c=o.fromString(l,!0,4);r>0?n=c.add(Math.abs(r)):r<0&&(n=c.subtract(Math.abs(r)));var s=n.toString(4);for("0"===s&&console.warning(new Error("face/position wrapping is not yet supported"));s.length<u;)s="0"+s;return i+"/"+s},e.S2Cell.prevKey=e.prevKey=function(t){return e.stepKey(t,-1)},e.S2Cell.nextKey=e.nextKey=function(t){return e.stepKey(t,1)}}("undefined"!=typeof module?module.exports:window);
//# sourceMappingURL=/sm/7e0872809859d65909bc4c93dcefb59bff4f922ea77b8fc0ceab59e81cc07f38.map